# UX Specification: F003-US001
## Version: 2.0

## Overview
Enable users to construct and maintain a diversified strategy portfolio based on correlation analysis, ensuring optimal risk distribution across uncorrelated trading opportunities.

## User Flow (Happy Path)
1. Entry: User navigates to Portfolio Management from main navigation
2. Analysis: System displays current portfolio with correlation matrix and recommendations
3. Action: User reviews correlation warnings and selects rebalancing options
4. Confirmation: System applies changes and updates portfolio allocation display

## Screen Specifications

### Screen: Portfolio Overview Dashboard
**Purpose**: Display current portfolio state with correlation analysis and rebalancing recommendations

**Layout**:
- USES: main_navigation from P40-10
- USES: page_container from P40-10
- USES: grid_layout from P40-10 (3-column responsive)
- Header section with portfolio summary metrics
- Main content area with strategy cards and correlation matrix
- Sidebar with rebalancing recommendations

**Design Tokens**:
```yaml
layout:
  container_padding: "spacing.semantic.2xl"
  content_gap: "spacing.semantic.xl"
  grid_columns: 3
  grid_gap: "spacing.semantic.card_grid_gap"
  
colors:
  background: "colors.semantic.background"
  surface: "colors.semantic.surface_elevated"
  text_primary: "colors.semantic.text.primary"
  text_secondary: "colors.semantic.text.secondary"
  correlation_warning: "colors.semantic.warning_light"
  
typography:
  page_title: "typography.semantic.h2"
  section_title: "typography.semantic.h4"
  body_text: "typography.semantic.body"
  
effects:
  card_shadow: "effects.semantic.card"
  transition: "effects.semantic_transitions.hover"
```

**Component Customization**:
```yaml
grid_layout:
  overrides:
    gap: "spacing.semantic.card_grid_gap"
    responsive_breakpoints:
      mobile: 1
      tablet: 2
      desktop: 3
```

**Interactions**:
- Click strategy card: Navigate to strategy details with `effects.semantic_transitions.page`
- Hover correlation cell: Show tooltip with `colors.semantic.text.primary` background
- Click rebalance button: Open rebalancing modal with `effects.semantic_transitions.modal`

**Responsive Behavior**:
- Mobile (<768px): Single column layout, `spacing.semantic.lg` padding
- Tablet (768px-1024px): Two column grid, `spacing.semantic.xl` padding  
- Desktop (>1024px): Three column grid, `spacing.semantic.2xl` padding

### Screen: Portfolio Rebalancing Modal
**Purpose**: Allow user to review and approve portfolio rebalancing recommendations

**Layout**:
- USES: modal from P40-10
- USES: data_table from P40-10
- USES: button from P40-10
- Current vs. recommended allocation comparison
- Impact analysis section
- Action buttons for approval/cancellation

**Design Tokens**:
```yaml
layout:
  modal_width: "800px"
  content_gap: "spacing.semantic.xl"
  section_gap: "spacing.semantic.lg"
  
colors:
  modal_background: "colors.semantic.surface_elevated"
  table_background: "colors.semantic.background"
  increase_indicator: "colors.semantic.profit"
  decrease_indicator: "colors.semantic.loss"
  
typography:
  modal_title: "typography.semantic.h3"
  table_header: "typography.semantic.table_header"
  allocation_value: "typography.semantic.price"
```

**Component Customization**:
```yaml
data_table:
  overrides:
    columns:
      - strategy_name
      - current_allocation
      - recommended_allocation
      - change_indicator
    row_hover: "colors.semantic.primary_light"
    
button:
  variants:
    primary: "Approve Rebalancing"
    secondary: "Cancel"
```

**Interactions**:
- Click table row: Highlight strategy with `colors.semantic.primary_light`
- Click approve: Close modal and trigger rebalancing with success feedback
- Click cancel: Close modal with `effects.semantic_transitions.modal`

## State Management
**States with Token References**:
```yaml
loading_portfolio:
  spinner_color: "colors.semantic.primary"
  overlay_background: "colors.semantic.surface"
  
correlation_warning:
  background: "colors.semantic.warning_light"
  border: "colors.semantic.status.warning"
  text: "colors.semantic.text.primary"
  
rebalancing_success:
  background: "colors.semantic.success_light"
  icon_color: "colors.semantic.status.success"
  text: "colors.semantic.text.primary"
  
portfolio_error:
  background: "colors.semantic.error_light"
  border: "colors.semantic.status.error"
  text: "colors.semantic.text.primary"
```

## Shared Components Usage Summary
- main_navigation: Header navigation
- page_container: Main layout wrapper
- grid_layout: Strategy card arrangement (3 instances)
- data_card: Portfolio summary metrics (4 instances)
- strategy_card: Individual strategy display (5+ instances)
- data_table: Correlation matrix and rebalancing table (2 instances)
- modal: Rebalancing confirmation dialog
- button: Action buttons throughout (6 instances)
- alert_banner: Correlation warnings and success messages (2 instances)

## Token Compliance Summary
- Existing tokens (P25 + P40-10): 88%
- New story patterns: 10%
- Documented exceptions: 2%