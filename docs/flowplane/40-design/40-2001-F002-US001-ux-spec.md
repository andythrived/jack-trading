# UX Specification: F002-US001
## Version: 2.0

## Overview
Enable users to generate executable trading code from validated strategy specifications with comprehensive safety checks and multi-platform support, focusing on Alpaca API as the primary target.

## User Flow (Happy Path)
1. Entry: User selects validated strategy from discovery results → Strategy details modal opens
2. Code Generation: User clicks "Generate Code" → System creates executable trading code with safety checks
3. Review: User reviews generated code and safety parameters → Code preview with validation summary displayed
4. Deployment: User approves code for paper trading → Strategy deployed to paper trading environment with confirmation

## Screen Specifications

### Screen: Strategy Code Generation Modal
**Purpose**: Generate and review executable trading code from strategy specifications

**Layout**:
- USES: modal from P40-10
- USES: button from P40-10
- USES: loading_spinner from P40-10
- USES: alert_banner from P40-10
- Two-column layout: Strategy details (left) and generated code preview (right)

**Design Tokens**:
```yaml
layout:
  modal_width: "1200px"
  content_padding: "spacing.semantic.3xl"
  column_gap: "spacing.semantic.2xl"
  section_gap: "spacing.semantic.xl"
  
colors:
  background: "colors.semantic.surface_elevated"
  section_background: "colors.semantic.surface"
  border: "colors.semantic.border.default"
  text_primary: "colors.semantic.text.primary"
  text_secondary: "colors.semantic.text.secondary"
  code_background: "colors.semantic.surface"
  
typography:
  section_heading: "typography.semantic.h4"
  body_text: "typography.semantic.body"
  code_text: "typography.semantic.code"
  
effects:
  section_shadow: "effects.semantic.card"
  transition: "effects.semantic_transitions.normal"
```

**Component Customization**:
```yaml
modal:
  overrides:
    max_width: "1200px"
    padding: "spacing.semantic.3xl"
    
button:
  overrides:
    generate_button:
      background: "colors.semantic.primary"
      text: "colors.semantic.text.inverse"
    deploy_button:
      background: "colors.semantic.status.success"
      text: "colors.semantic.text.inverse"
```

**Interactions**:
- Click "Generate Code": Triggers code generation with loading state using `loading_spinner`
- Hover code sections: Highlight with `colors.semantic.primary_light` background
- Click "Deploy to Paper Trading": Shows confirmation alert using `alert_banner`

**Responsive Behavior**:
- Desktop (>1024px): Two-column layout with code preview
- Tablet (<1024px): Single column, collapsible code preview
- Mobile (<768px): Full-screen modal, stacked sections

### Screen: Code Generation Progress
**Purpose**: Show real-time progress of code generation and validation

**Layout**:
- USES: progress_bar from P40-10
- USES: loading_spinner from P40-10
- USES: status_badge from P40-10
- Vertical progress steps with status indicators

**Design Tokens**:
```yaml
layout:
  progress_container_padding: "spacing.semantic.2xl"
  step_gap: "spacing.semantic.lg"
  status_gap: "spacing.semantic.md"
  
colors:
  background: "colors.semantic.surface_elevated"
  step_active: "colors.semantic.primary"
  step_complete: "colors.semantic.status.success"
  step_pending: "colors.semantic.text.tertiary"
  
typography:
  step_title: "typography.semantic.body"
  step_detail: "typography.semantic.body_sm"
  
effects:
  step_transition: "effects.semantic_transitions.normal"
```

**Interactions**:
- Progress updates: Smooth transitions between steps using `effects.semantic_transitions.normal`
- Step completion: Status badge changes from "pending" to "complete"
- Error handling: Failed steps show error status with retry option

### Screen: Code Review and Safety Check
**Purpose**: Review generated code and validate safety parameters before deployment

**Layout**:
- USES: data_card from P40-10
- USES: button from P40-10
- USES: alert_banner from P40-10
- Three-section layout: Safety summary, code preview, deployment controls

**Design Tokens**:
```yaml
layout:
  review_container_padding: "spacing.semantic.2xl"
  section_gap: "spacing.semantic.xl"
  safety_card_gap: "spacing.semantic.md"
  
colors:
  background: "colors.semantic.background"
  safety_pass: "colors.semantic.success_light"
  safety_warning: "colors.semantic.warning_light"
  code_background: "colors.semantic.surface"
  
typography:
  safety_heading: "typography.semantic.h5"
  safety_detail: "typography.semantic.body_sm"
  code_preview: "typography.semantic.code"
```

**Component Customization**:
```yaml
data_card:
  overrides:
    safety_checks:
      background: "colors.semantic.success_light"
      border: "colors.semantic.status.success"
      
alert_banner:
  overrides:
    safety_warning:
      background: "colors.semantic.warning_light"
      border: "colors.semantic.status.warning"
```

**Interactions**:
- Click safety check items: Expand detailed validation results
- Scroll code preview: Syntax highlighting with proper contrast ratios
- Click "Deploy": Confirmation modal with final safety summary

**State Management**:
```yaml
generation_states:
  loading:
    spinner_color: "colors.semantic.primary"
    overlay_background: "colors.semantic.surface"
    
  success:
    banner_background: "colors.semantic.success_light"
    banner_text: "colors.semantic.text.primary"
    
  error:
    banner_background: "colors.semantic.error_light"
    banner_text: "colors.semantic.status.error"
    
  validation_warning:
    banner_background: "colors.semantic.warning_light"
    banner_text: "colors.semantic.text.primary"
```

## Shared Components Usage Summary
- modal: Primary container for code generation workflow
- button: 4 instances (Generate, Deploy, Cancel, Retry)
- loading_spinner: Progress indication during generation
- alert_banner: Safety warnings and status messages
- progress_bar: Generation progress visualization
- status_badge: Step completion indicators
- data_card: Safety check summary display

## Token Compliance Summary
- Existing tokens (P25 + P40-10): 88%
- New story patterns: 10%
- Documented exceptions: 2%