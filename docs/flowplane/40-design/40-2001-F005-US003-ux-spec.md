# UX Specification: F005-US003
## Version: 2.0

## Overview
Provide comprehensive market context and benchmark comparisons for strategy performance, helping users understand how their strategies perform relative to market conditions and standard benchmarks without requiring deep trading expertise.

## User Flow (Happy Path)
1. Entry: User navigates to strategy performance page from portfolio dashboard
2. Context Loading: System displays strategy performance with market context and benchmark comparisons
3. Exploration: User explores different time periods and benchmark comparisons
4. Understanding: User gains clear insight into strategy performance relative to market conditions

## Screen Specifications

### Screen: Strategy Performance Context
**Purpose**: Display strategy performance with comprehensive market context and benchmark comparisons

**Layout**:
- USES: page_container from P40-10
- USES: breadcrumb from P40-10
- USES: performance_chart from P40-10
- USES: data_card from P40-10
- USES: metric_display from P40-10
- Grid: Responsive 3-column layout for metrics, 2-column for charts

**Design Tokens**:
```yaml
layout:
  container_padding: "spacing.semantic.2xl"
  section_gap: "spacing.semantic.3xl"
  metric_grid_gap: "spacing.semantic.card_grid_gap"
  
colors:
  background: "colors.semantic.background"
  section_background: "colors.semantic.surface_elevated"
  text_primary: "colors.semantic.text.primary"
  text_secondary: "colors.semantic.text.secondary"
  
typography:
  page_title: "typography.semantic.h2"
  section_title: "typography.semantic.h4"
  body_text: "typography.semantic.body"
  
effects:
  section_shadow: "effects.semantic.card"
  transition: "effects.semantic_transitions.normal"
```

**Component Customization**:
```yaml
performance_chart:
  overrides:
    height: "400px"
    padding: "spacing.semantic.xl"
    
data_card:
  overrides:
    padding: "spacing.semantic.2xl"
    gap: "spacing.semantic.lg"
```

**Interactions**:
- Click timeframe selector: Update all charts and metrics with `effects.semantic_transitions.normal`
- Hover benchmark comparison: Highlight with `colors.semantic.primary_light`
- Click market regime filter: Filter data with loading state using `loading_spinner`

**Responsive Behavior**:
- Mobile (<768px): Stack metrics vertically, `spacing.semantic.lg` gaps
- Desktop (>768px): 3-column metric grid, side-by-side charts, `spacing.semantic.xl` gaps

### Screen: Market Context Details
**Purpose**: Detailed view of market conditions and regime analysis

**Layout**:
- USES: page_container from P40-10
- USES: breadcrumb from P40-10
- USES: data_table from P40-10
- USES: alert_banner from P40-10
- Two-column layout with context panel and data table

**Design Tokens**:
```yaml
layout:
  two_column_gap: "spacing.semantic.2xl"
  context_panel_width: "400px"
  
colors:
  context_background: "colors.semantic.surface"
  highlight_background: "colors.semantic.primary_light"
  regime_bull: "colors.semantic.profit"
  regime_bear: "colors.semantic.loss"
  regime_neutral: "colors.semantic.neutral"
  
typography:
  context_title: "typography.semantic.h5"
  regime_label: "typography.semantic.body"
  explanation_text: "typography.semantic.body"
```

**Interactions**:
- Click market regime: Filter performance data and update explanations
- Hover data points: Show contextual tooltips with market events
- Click explanation link: Navigate to detailed market analysis

**Responsive Behavior**:
- Mobile (<768px): Stack context panel above table
- Desktop (>768px): Side-by-side layout with fixed context panel

## State Management
**States with Token References**:
```yaml
loading_context:
  spinner_color: "colors.semantic.primary"
  overlay_background: "colors.semantic.surface"
  
performance_positive:
  accent_color: "colors.semantic.profit"
  background_tint: "colors.semantic.success_light"
  
performance_negative:
  accent_color: "colors.semantic.loss"
  background_tint: "colors.semantic.error_light"
  
market_regime_bull:
  indicator_color: "colors.semantic.profit"
  background: "colors.semantic.success_light"
  
market_regime_bear:
  indicator_color: "colors.semantic.loss"
  background: "colors.semantic.error_light"
  
market_regime_neutral:
  indicator_color: "colors.semantic.neutral"
  background: "colors.semantic.surface"
```

## Shared Components Usage Summary
- page_container: Both screens
- breadcrumb: Both screens  
- performance_chart: 2 instances
- data_card: 6 instances (benchmark metrics)
- metric_display: 8 instances (performance metrics)
- data_table: 1 instance (market events)
- alert_banner: Context explanations
- loading_spinner: Data loading states

## Token Compliance Summary
- Existing tokens (P25 + P40-10): 88%
- New story patterns: 9%
- Documented exceptions: 3%