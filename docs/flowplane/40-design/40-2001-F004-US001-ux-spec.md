# UX Specification: F004-US001
## Version: 2.0

## Overview
Enable users to configure and apply asset-specific validation rules that ensure strategies are properly tested according to the unique characteristics and requirements of equities, FX pairs, and futures markets.

## User Flow (Happy Path)
1. Entry: User navigates to Strategy Validation settings from main navigation
2. Asset Selection: User selects asset class (Equities, FX, Futures) to configure validation rules
3. Rule Configuration: User adjusts validation parameters specific to selected asset class
4. Rule Preview: System shows validation criteria and expected testing requirements
5. Save & Apply: User saves configuration and applies rules to pending strategies
6. Confirmation: System confirms rules are active and shows affected strategies count

## Screen Specifications

### Screen: Validation Rules Dashboard
**Purpose**: Central hub for managing asset-specific validation configurations

**Layout**:
- USES: main_navigation from P40-10
- USES: page_container from P40-10
- USES: grid_layout from P40-10 (3-column responsive grid)
- Asset class cards arranged in grid with consistent spacing

**Design Tokens**:
```yaml
layout:
  container_padding: "spacing.semantic.2xl"
  grid_gap: "spacing.semantic.lg"
  section_spacing: "spacing.semantic.xl"
  
colors:
  background: "colors.semantic.background"
  page_title: "colors.semantic.text.primary"
  section_divider: "colors.semantic.border.default"
  
typography:
  page_title: "typography.semantic.h2"
  section_heading: "typography.semantic.h4"
  description: "colors.semantic.text.secondary"
```

**Component Customization**:
```yaml
page_container:
  overrides:
    title: "Strategy Validation Rules"
    subtitle: "Configure asset-specific validation requirements"
```

**Interactions**:
- Click asset class card: Navigate to asset-specific configuration with `effects.semantic_transitions.page`
- Hover card: Apply `effects.semantic.card_hover` elevation
- View active rules summary: Expand inline with `effects.semantic_transitions.normal`

**Responsive Behavior**:
- Mobile (<768px): Single column stack, `spacing.semantic.md` gaps
- Desktop (>768px): 3-column grid, `spacing.semantic.lg` gaps

### Screen: Asset-Specific Rule Configuration
**Purpose**: Configure detailed validation parameters for selected asset class

**Layout**:
- USES: main_navigation from P40-10
- USES: breadcrumb from P40-10
- USES: form_field from P40-10
- USES: select_dropdown from P40-10
- USES: button from P40-10
- Two-column layout: configuration form left, preview panel right

**Design Tokens**:
```yaml
layout:
  form_column_width: "60%"
  preview_column_width: "40%"
  column_gap: "spacing.semantic.2xl"
  form_section_gap: "spacing.semantic.form_section_gap"
  
colors:
  form_background: "colors.semantic.surface_elevated"
  preview_background: "colors.semantic.surface"
  section_border: "colors.semantic.border.default"
  
typography:
  section_title: "typography.semantic.h5"
  field_label: "typography.semantic.form_label"
  help_text: "typography.semantic.caption"
```

**Component Customization**:
```yaml
breadcrumb:
  overrides:
    path: ["Validation Rules", "Equities Configuration"]

form_field:
  overrides:
    label_color: "colors.semantic.text.secondary"
    spacing: "spacing.semantic.form_section_gap"
```

**Interactions**:
- Change validation parameter: Update preview panel in real-time with `effects.semantic_transitions.fast`
- Click "Test Rules": Show validation simulation with `loading_spinner`
- Submit configuration: Save with success confirmation using `alert_banner`

**Responsive Behavior**:
- Mobile (<768px): Stack form above preview, full width
- Desktop (>768px): Side-by-side columns with 60/40 split

### Screen: Validation Preview Panel
**Purpose**: Show real-time preview of validation requirements and affected strategies

**Layout**:
- USES: data_card from P40-10
- USES: metric_display from P40-10
- USES: progress_bar from P40-10
- Vertical stack of preview cards with validation metrics

**Design Tokens**:
```yaml
layout:
  panel_padding: "spacing.semantic.xl"
  card_spacing: "spacing.semantic.lg"
  metric_gap: "spacing.semantic.md"
  
colors:
  panel_background: "colors.semantic.surface"
  preview_border: "colors.semantic.border.strong"
  validation_pass: "colors.semantic.status.success"
  validation_warning: "colors.semantic.status.warning"
  
typography:
  preview_title: "typography.semantic.h6"
  metric_value: "typography.semantic.price"
  requirement_text: "typography.semantic.body_sm"
```

**Component Customization**:
```yaml
data_card:
  overrides:
    background: "colors.semantic.surface_elevated"
    border: "colors.semantic.border.strong"

metric_display:
  overrides:
    value_color: "colors.semantic.primary"
    label_color: "colors.semantic.text.secondary"
```

**Interactions**:
- Hover validation requirement: Show detailed explanation tooltip
- Click affected strategies count: Expand list of strategies that will be impacted
- View validation timeline: Show expected testing duration with `progress_bar`

### Screen: Rule Activation Confirmation
**Purpose**: Confirm rule changes and show impact on existing strategies

**Layout**:
- USES: modal from P40-10
- USES: alert_banner from P40-10
- USES: data_table from P40-10
- USES: button from P40-10
- Modal overlay with confirmation details and affected strategies table

**Design Tokens**:
```yaml
layout:
  modal_width: "800px"
  content_gap: "spacing.semantic.xl"
  table_max_height: "300px"
  
colors:
  confirmation_background: "colors.semantic.surface_elevated"
  impact_warning: "colors.semantic.warning_light"
  affected_count: "colors.semantic.primary"
  
typography:
  confirmation_title: "typography.semantic.h4"
  impact_summary: "typography.semantic.body"
  strategy_count: "typography.semantic.price_large"
```

**Component Customization**:
```yaml
modal:
  overrides:
    title: "Confirm Validation Rule Changes"
    size: "lg"

alert_banner:
  overrides:
    type: "warning"
    message: "These changes will affect validation for X existing strategies"

data_table:
  overrides:
    max_height: "300px"
    sortable: true
```

**Interactions**:
- Click "Apply Changes": Save rules and close modal with success feedback
- Click "Cancel": Close modal without changes using `effects.semantic_transitions.modal`
- Review affected strategies: Scroll through table with strategy details

## State Management
**States with Token References**:
```yaml
loading_validation:
  spinner_color: "colors.semantic.primary"
  overlay_background: "colors.semantic.surface"
  
rule_saved:
  alert_background: "colors.semantic.success_light"
  alert_border: "colors.semantic.status.success"
  
validation_error:
  alert_background: "colors.semantic.error_light"
  alert_border: "colors.semantic.status.error"
  field_border: "colors.semantic.status.error"
  
preview_updating:
  panel_opacity: "0.7"
  transition: "effects.semantic_transitions.normal"
```

## Shared Components Usage Summary
- main_navigation: All screens
- page_container: 2 screens
- breadcrumb: 1 screen
- form_field: 8 instances across configuration
- select_dropdown: 4 instances for asset class and parameter selection
- button: 6 instances for actions and navigation
- data_card: 3 instances in preview panel
- metric_display: 5 instances for validation metrics
- progress_bar: 2 instances for validation timeline
- modal: 1 instance for confirmation
- alert_banner: 3 instances for feedback
- data_table: 1 instance for affected strategies
- loading_spinner: 2 instances for async operations

## Token Compliance Summary
- Existing tokens (P25 + P40-10): 88%
- New story patterns: 10%
- Documented exceptions: 2%