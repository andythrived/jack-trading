# UX Specification: F003-US003
## Version: 2.0

## Overview
Enable users to monitor real-time portfolio risk metrics and performance through an intuitive dashboard interface with immediate visual feedback on risk thresholds and portfolio health.

## User Flow (Happy Path)
1. Entry: User navigates to Risk Management Dashboard from main navigation
2. Dashboard Load: System displays real-time portfolio metrics, risk indicators, and strategy performance
3. Risk Review: User reviews VaR calculations, drawdown metrics, and individual strategy risk contributions
4. Threshold Monitoring: User observes risk alerts and threshold warnings with clear visual indicators
5. Action Response: User can drill down into specific strategies or adjust risk parameters as needed

## Screen Specifications

### Screen: Risk Management Dashboard
**Purpose**: Comprehensive real-time view of portfolio risk metrics and performance monitoring

**Layout**:
- USES: main_navigation from P40-10
- USES: page_container from P40-10
- USES: grid_layout from P40-10 (3-column responsive grid)
- USES: sidebar_layout from P40-10 (risk controls sidebar)

**Design Tokens**:
```yaml
layout:
  container_padding: "spacing.semantic.2xl"
  section_gap: "spacing.semantic.xl"
  card_gap: "spacing.semantic.card_grid_gap"
  
colors:
  background: "colors.semantic.background"
  surface: "colors.semantic.surface_elevated"
  text_primary: "colors.semantic.text.primary"
  text_secondary: "colors.semantic.text.secondary"
  
typography:
  page_title: "typography.semantic.h2"
  section_title: "typography.semantic.h4"
  metric_value: "typography.semantic.price_large"
```

**Component Customization**:
```yaml
grid_layout:
  overrides:
    columns: 3
    responsive: true
    gap: "spacing.semantic.card_grid_gap"
    
sidebar_layout:
  overrides:
    sidebar_width: "320px"
    collapsible: true
```

**Main Content Areas**:

#### Portfolio Overview Section
- USES: data_card from P40-10 (Portfolio Value)
- USES: data_card from P40-10 (Daily P&L)
- USES: data_card from P40-10 (Total Return)
- USES: metric_display from P40-10 (Active Strategies Count)

#### Risk Metrics Section
- USES: data_card from P40-10 (Portfolio VaR)
- USES: data_card from P40-10 (Maximum Drawdown)
- USES: risk_meter from P40-10 (Overall Risk Level)
- USES: performance_chart from P40-10 (Risk Timeline)

#### Strategy Performance Section
- USES: data_table from P40-10 (Strategy Performance Table)
- USES: status_badge from P40-10 (Strategy Status Indicators)

**Interactions**:
- Click Portfolio Value card: Navigate to detailed portfolio breakdown
- Hover risk metrics: Show tooltip with calculation details using `effects.semantic_transitions.hover`
- Click strategy row: Open strategy detail modal using `modal` component
- Toggle risk level alerts: Update display with `colors.semantic.status.warning`

**Responsive Behavior**:
- Mobile (<768px): Stack cards vertically, collapse sidebar, use `spacing.semantic.lg`
- Tablet (768px-1024px): 2-column grid, collapsible sidebar
- Desktop (>1024px): 3-column grid, persistent sidebar, `spacing.semantic.2xl`

### Screen: Strategy Detail Modal
**Purpose**: Detailed view of individual strategy performance and risk metrics

**Layout**:
- USES: modal from P40-10
- USES: performance_chart from P40-10
- USES: data_table from P40-10 (Trade History)
- USES: metric_display from P40-10 (Key Statistics)

**Design Tokens**:
```yaml
modal:
  size: "lg"
  padding: "spacing.semantic.3xl"
  gap: "spacing.semantic.xl"
  
content:
  section_gap: "spacing.semantic.lg"
  metric_gap: "spacing.semantic.md"
  
colors:
  chart_background: "colors.semantic.surface"
  profit_highlight: "colors.semantic.profit"
  loss_highlight: "colors.semantic.loss"
```

**Content Sections**:
1. Strategy Header: Name, status badge, key metrics
2. Performance Chart: 30-day performance visualization
3. Risk Metrics: Sharpe ratio, max drawdown, volatility
4. Recent Trades: Last 10 trades with P&L

## State Management
**States with Token References**:
```yaml
loading:
  spinner_color: "colors.semantic.primary"
  overlay_background: "colors.semantic.surface"
  
risk_alert:
  background: "colors.semantic.warning_light"
  border: "colors.semantic.status.warning"
  text: "colors.semantic.text.primary"
  
critical_risk:
  background: "colors.semantic.error_light"
  border: "colors.semantic.status.error"
  text: "colors.semantic.text.primary"
  
normal_operation:
  indicators: "colors.semantic.status.success"
  background: "colors.semantic.success_light"
```

**Real-time Updates**:
- Portfolio metrics refresh every 30 seconds
- Risk calculations update every 60 seconds
- Strategy status updates every 15 seconds
- WebSocket connection for immediate alerts

## Shared Components Usage Summary
- main_navigation: Dashboard header
- page_container: Main layout wrapper
- grid_layout: Card arrangement (3 instances)
- sidebar_layout: Risk controls panel
- data_card: Portfolio and risk metrics (8 instances)
- metric_display: Key statistics (6 instances)
- data_table: Strategy performance table
- performance_chart: Risk timeline and strategy charts (2 instances)
- risk_meter: Overall portfolio risk indicator
- status_badge: Strategy status indicators (multiple)
- modal: Strategy detail overlay
- loading_spinner: Data refresh indicators

## Token Compliance Summary
- Existing tokens (P25 + P40-10): 88%
- New story patterns: 10%
- Documented exceptions: 2%