# UX Specification: F003-US002
## Version: 2.0

## Overview
Enable automated strategy rotation based on performance metrics and market conditions, allowing the system to retire underperforming strategies and introduce new ones while maintaining portfolio diversification targets.

## User Flow (Happy Path)
1. Entry: User accesses Strategy Portfolio Management dashboard to review rotation recommendations
2. Review: System displays rotation analysis with underperforming strategies flagged and replacement candidates suggested
3. Configuration: User adjusts rotation thresholds and confirms automated rotation settings
4. Activation: System begins automated rotation cycle with real-time monitoring and notifications
5. Completion: Portfolio maintains target strategy count with improved performance metrics

## Screen Specifications

### Screen: Rotation Dashboard
**Purpose**: Central interface for monitoring and configuring automated strategy rotation

**Layout**:
- USES: main_navigation from P40-10
- USES: sidebar_layout from P40-10
- USES: grid_layout from P40-10 (3-column responsive)
- USES: page_container from P40-10

**Design Tokens**:
```yaml
layout:
  container_padding: "spacing.semantic.2xl"
  section_gap: "spacing.semantic.form_section_gap"
  grid_columns: 3
  
colors:
  background: "colors.semantic.background"
  surface: "colors.semantic.surface_elevated"
  text_primary: "colors.semantic.text.primary"
  text_secondary: "colors.semantic.text.secondary"
  
typography:
  page_title: "typography.semantic.h2"
  section_title: "typography.semantic.h4"
  body: "typography.semantic.body"
```

**Component Customization**:
```yaml
sidebar_layout:
  overrides:
    sidebar_width: "320px"
    main_padding: "spacing.semantic.2xl"
    
grid_layout:
  overrides:
    gap: "spacing.semantic.card_grid_gap"
    responsive_breakpoints: true
```

**Interactions**:
- Click rotation settings: Opens configuration modal with `effects.semantic_transitions.modal`
- Hover strategy cards: Elevation change with `effects.semantic.card_hover_lift`
- Toggle auto-rotation: Immediate state change with `colors.semantic.status.success`

**Responsive Behavior**:
- Mobile (<768px): Single column stack, `spacing.semantic.lg`
- Tablet (768-1024px): Two column grid, `spacing.semantic.xl`
- Desktop (>1024px): Three column grid, `spacing.semantic.2xl`

### Screen: Rotation Configuration Modal
**Purpose**: Configure automated rotation parameters and thresholds

**Layout**:
- USES: modal from P40-10
- USES: form_field from P40-10
- USES: button from P40-10
- USES: select_dropdown from P40-10

**Design Tokens**:
```yaml
modal:
  max_width: "600px"
  padding: "spacing.semantic.3xl"
  gap: "spacing.semantic.xl"
  
form:
  field_spacing: "spacing.semantic.form_section_gap"
  label_spacing: "spacing.semantic.sm"
  
colors:
  background: "colors.semantic.surface_elevated"
  text: "colors.semantic.text.primary"
  border: "colors.semantic.border.default"
  
typography:
  title: "typography.semantic.h3"
  labels: "typography.semantic.form_label"
  body: "typography.semantic.body"
```

**Interactions**:
- Form validation: Error states with `colors.semantic.error_light`
- Save configuration: Success feedback with `colors.semantic.success_light`
- Cancel action: Modal close with `effects.semantic_transitions.modal`

### Screen: Strategy Performance Analysis
**Purpose**: Detailed view of strategy performance metrics for rotation decisions

**Layout**:
- USES: data_table from P40-10
- USES: performance_chart from P40-10
- USES: metric_display from P40-10
- USES: risk_meter from P40-10

**Design Tokens**:
```yaml
layout:
  table_container: "spacing.semantic.2xl"
  chart_height: "400px"
  metrics_grid_gap: "spacing.semantic.card_grid_gap"
  
colors:
  table_background: "colors.semantic.surface_elevated"
  chart_background: "colors.semantic.background"
  profit_indicator: "colors.semantic.profit"
  loss_indicator: "colors.semantic.loss"
  
typography:
  table_headers: "typography.semantic.table_header"
  metrics: "typography.semantic.price"
  percentages: "typography.semantic.percentage"
```

**Component Customization**:
```yaml
data_table:
  overrides:
    row_height: "56px"
    cell_padding: "spacing.semantic.lg"
    sortable: true
    
performance_chart:
  overrides:
    timeframe: "3M"
    show_grid: true
    interactive: true
```

**Interactions**:
- Sort table columns: Visual feedback with `colors.semantic.primary_light`
- Chart timeframe selection: Smooth transition with `effects.semantic_transitions.normal`
- Row selection: Highlight with `colors.semantic.primary_light`

### Screen: Rotation History & Audit
**Purpose**: Track historical rotation decisions and performance impact

**Layout**:
- USES: data_table from P40-10
- USES: status_badge from P40-10
- USES: alert_banner from P40-10

**Design Tokens**:
```yaml
layout:
  container_padding: "spacing.semantic.2xl"
  table_spacing: "spacing.semantic.xl"
  
colors:
  background: "colors.semantic.background"
  audit_success: "colors.semantic.success_light"
  audit_warning: "colors.semantic.warning_light"
  
typography:
  timestamp: "typography.semantic.caption"
  action_text: "typography.semantic.body"
  impact_metrics: "typography.semantic.price"
```

**Interactions**:
- View rotation details: Expand row with smooth animation
- Filter by date range: Real-time table updates
- Export audit log: Download confirmation with success banner

## State Management
**States with Token References**:
```yaml
rotation_active:
  indicator_color: "colors.financial.status_indicators.active_strategy"
  background: "colors.semantic.success_light"
  
rotation_paused:
  indicator_color: "colors.financial.status_indicators.paused_strategy"
  background: "colors.semantic.warning_light"
  
strategy_retiring:
  background: "colors.semantic.error_light"
  text_color: "colors.semantic.status.error"
  transition: "effects.semantic_transitions.slow"
  
strategy_introducing:
  background: "colors.semantic.success_light"
  text_color: "colors.semantic.status.success"
  transition: "effects.semantic_transitions.normal"
```

## Shared Components Usage Summary
- main_navigation: All screens
- sidebar_layout: Dashboard screen
- grid_layout: Dashboard and analysis screens
- page_container: All screens
- modal: Configuration screen
- data_table: Analysis and history screens
- form_field: Configuration modal (4 instances)
- button: All screens (8 instances)
- select_dropdown: Configuration modal (3 instances)
- performance_chart: Analysis screen
- metric_display: Dashboard (6 instances)
- status_badge: All screens
- alert_banner: History screen
- risk_meter: Dashboard and analysis

## Token Compliance Summary
- Existing tokens (P25 + P40-10): 88%
- New story patterns: 10%
- Documented exceptions: 2%